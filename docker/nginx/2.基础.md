# Nginx简介 

 

# 编译与安装 

官网： nginx.org 

mainline:主线版本 

Table 稳定版 

 

cd  /usr/local/src    进入文件 

wget https://ftp.pcre.org/pub/pcre/pcre-8.44.tar.gz （下载地址）  用wget下载下来 

tar -zxvf pcre-8.44.tar.gz      解压文件 

cd pcre-8.44                                进入文件 

 

老三步： 

./configure --prefix=/usr/local/nginx       安装在/usr/local/nginx下,检测缺少的库与依赖 

例如： 

监测到安装缺少pcre 1.安装。   2.禁用 

yum install pcre-devel 查看是否有响应的devel 

devel：开发头文件（需安装） 

 

编译 :

    make 
    make install 

进入/usr/local/nginx 文档  
ls查看，新增了nginx 


cd nginx/ 


文件下有四个目录  
conf: :配置文件目录  
html : 网页文件  
logs  :  日志文件  
sbin  : 主要二进制程序（进程） 

cd sbin/nginx 启动nginx 

 

 

端口被占用(例：80) 

netstat -ant  查看端口 

关闭占用端口的软件或服务 

ps aux|grep 80   查看（80端口）进程 

netstat -antp  查看占用端口的程序 2985 /httpd 

kill -9 2985  或  pkill -9 2985 

 

# Nginx信号量 

nginx的重启与关闭 

官网查看有哪些信号量 ：commandline 

 

开启 ：运行二进制文件 

关闭 ：kill -9 2985  或  pkill -9 2985 

kill 信号量 

INT/TERM : 快速关闭进程（不建议） 

QUIT        ：优雅的关闭进程（请求结束后再关闭） 

HUP         ：开启新的worher进程（特点：读心的配置文件，优雅关掉旧的进程） 

vim conf/nginx.conf  更改配置文件 

USR1:重读日志（运维经常使用） 

    tail -10 logs/access.log  (记录) 
    11 logs  访问记录 
    mv  logs/access.log logs/access.log.1103 

    更换节点：  
    rm  access.log 
    touch logs/access.log 
    kill USR1 主进程号 

升级时使用 

USR2        ： 
WINCH      : 

 

不想通过主进程号操作 :

vim conf/nginx.conf  更改配置文件 

pid 

more logs  下含有pid 

more logs/nginx.pid          显示主进程号 

cat logs/nginx.pid   

kill HUP 'cat logs/nginx.pid' 

 

 

二： 

./sbin/nginx -h 

./sbin/nginx -s reload  重新载入配置文件 

./sbin/nginx -s stop     强制退出 

./sbin/nginx -s quit      优雅退出 

./sbin/nginx -s reopen == kill USR1 'cat logs/nginx.pid'    

./sbin/nginx -t  测试配置文件       

# Nginx 虚拟主机配置 

 